import{_ as C,u as x,M as b,s as V,r as R,b as g,o as s,c as p,h as u,w as d,j as v,t as M,k,d as o,N as P,e as f,C as w,P as B}from"./index.0c6b5649.js";import{u as S,r as h,e as N}from"./index.esm.a512948c.js";const E={props:{edit:Boolean},setup(){const c=x(),t=b(),{message:a}=V(b()),e=R(!1),{user:r}=V(x()),_={firstname:{required:h},lastname:{required:h},email:{required:h,email:N}},m=S(_,r);return{user:r,message:a,rules:_,v$:m,isRegistered:function(){const l=c.getUser;return this.mode==="register"&&!!l.role},validation:function(){return!!this.user.guid&&!!this.user.username},register:async function(){try{e.value=!0,t.setMessage({text:"Registering user...",type:"info",spinner:!0}),await P.registerUser(r.value).then(()=>{t.setMessage({text:"Successfully registered user!",type:"success"})})}catch(l){console.error(l),e.value=!0,t.setMessage({text:"User could not be registered.",type:"error"})}},update:async function(){try{e.value=!0,t.setMessage({text:"Updating user...",type:"info",spinner:!0}),await P.updateUser(r.value.guid,r.value),t.setMessage({text:"Successfully updated user!",type:"success"})}catch(l){console.error(l),e.value=!0,t.setMessage({text:"User could not be updated.",type:"error"})}},activeMessage:e}}},T={key:0},D={key:1},I=f(" You are currently registered as a(n) "),Y=f(". "),j=f("Update"),q=f("Register");function A(c,t,a,e,r,_){const m=g("PrimeMessage"),i=g("InputText"),y=g("PrimeButton"),U=g("PrimeCard");return s(),p("div",null,[e.user&&e.isRegistered?(s(),u(m,{key:0,show:"",variant:"info",closable:!1},{default:d(()=>[e.user.role==="inactive"?(s(),p("p",T," Your registration is currently under review. Please check back regularly for updates. ")):(s(),p("p",D,[I,v("b",null,M(e.user.role),1),Y]))]),_:1})):k("",!0),e.activeMessage?(s(),u(m,{key:1,show:"",variant:e.message.type,life:5e3,sticky:!1},{default:d(()=>[v("p",null,M(e.message.text),1)]),_:1},8,["variant"])):k("",!0),e.user&&(!e.isRegistered||a.edit)?(s(),u(U,{key:2},{content:d(()=>[v("form",null,[o(i,{id:"input-user-register-username",disabled:!0,value:e.user.username},null,8,["value"]),o(i,{id:"input-user-register-firstname",modelValue:e.user.firstname,"onUpdate:modelValue":t[0]||(t[0]=n=>e.user.firstname=n),placeholder:"Enter user's given name"},null,8,["modelValue"]),o(i,{id:"input-user-register-lastname",modelValue:e.user.lastname,"onUpdate:modelValue":t[1]||(t[1]=n=>e.user.lastname=n),placeholder:"Enter user's last name"},null,8,["modelValue"]),o(i,{type:"email",id:"input-user-register-email",modelValue:e.user.email,"onUpdate:modelValue":t[2]||(t[2]=n=>e.user.email=n),placeholder:"Enter user's email"},null,8,["modelValue"]),a.edit?(s(),u(y,{key:0,onClick:e.update,disabled:!e.validation,class:"m-2",type:"button",variant:"info"},{default:d(()=>[j]),_:1},8,["onClick","disabled"])):(s(),u(y,{key:1,onClick:e.register,disabled:!e.validation,class:"m-2",type:"button",variant:"info"},{default:d(()=>[q]),_:1},8,["onClick","disabled"]))])]),_:1})):k("",!0)])}var H=C(E,[["render",A]]);const G={__name:"NewUser",props:{update:Boolean},setup(c){const a=c.update||!1;return(e,r)=>(s(),p("main",null,[o(B,{title:"User Profile",subtitle:"Update Personal Profile Details"}),o(H,{edit:w(a)},null,8,["edit"])]))}};export{G as default};
