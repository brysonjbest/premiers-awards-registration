import{_ as w,a as k,u as I,r as v,s as j,b as h,o as a,c as o,h as z,w as P,e as S,t as D,j as t,d as n,n as s,k as l,f as R,m as B}from"./index.ef2c4900.js";import{u as T,r as c,e as F}from"./index.esm.43a1b846.js";const M={props:{registrationID:String,adminView:Boolean,detailsView:Boolean},setup(f){const r=k(),y=I(),e=v(R.get("organizations")||[]),{registration:_}=j(k()),V=T({organization:{required:c},branch:{required:c},primarycontact:{required:c},primaryemail:{required:c,email:F},financialcontact:{required:c},clientministry:{required:c},respcode:{required:c},serviceline:{required:c},stob:{required:c},project:{required:c}},_);let u=v(!1),g=v(!1);const d=v({severity:null,text:""}),m=async function(p){if(p.preventDefault(),!!await this.v$.$validate())try{u.value=!0;const x=y.getUser.username;this.registration.registrar=this.registration.registrar!==null||this.registration.registrar.length!==0?this.registration.registrar:x.username,r.registerFinancialInformation(this.registration).then(C=>{console.log(C),this.$forceUpdate,u.value=!1,g.value=!0,d.value={severity:"success",text:"Registration Updated!"}})}catch(x){u.value=!1,console.warn(x),g.value=!0,d.value={severity:"error",text:"Registration could not be updated."}}finally{setTimeout(()=>g.value=!1,1500),f.registrationID||B.push("/create/registration/")}},b=function(p){p.preventDefault(),this.registration.organization="",this.registration.branch="",this.registration.primarycontact="",this.registration.primaryemail="",this.registration.financialcontact="",this.registration.clientministry=null,this.registration.respcode=null,this.registration.serviceline=null,this.registration.stob=null,this.registration.project=null},i=async function(){const p=y.getUser;return r.$reset,f.registrationID?await r.fillOnlyRegistration(f.registrationID):f.adminView?await r.fillAllRegistrations():await r.fill(p.guid)?r.fill(p.guid):[]};return i(),{loading:u,message:g,messageText:d,registration:_,v$:V,organizations:e,fillList:i,onSubmit:m,onReset:b}}},N={class:"dropdown"},G=t("label",{for:"organization"},"Organization:",-1),E={key:0,class:"p-error",id:"organization-help"},O={class:"text-field"},L=t("label",{for:"branch"},"Branch:",-1),A={key:0,class:"p-error",id:"branch-help"},q={class:"text-field"},H=t("label",{for:"primarycontact"},"Primary Contact:",-1),J={key:0,class:"p-error",id:"primarycontact-help"},K={class:"text-field"},Q=t("label",{for:"primaryemail"},"Primary Contact Email:",-1),W={key:0,id:"primaryemail-help",class:"p-error"},X={class:"text-field"},Y=t("label",{for:"financialcontact"},"Financial Contact:",-1),Z={key:0,class:"p-error",id:"financialcontact-help"},$={class:"number-field"},ee=t("label",{for:"clientministry"},"Client/Ministry Number:",-1),re={key:0,id:"clientministry-help",class:"p-error"},ie={class:"number-field"},te=t("label",{for:"respcode"},"RESP Code:",-1),ae={key:0,id:"respcode-help",class:"p-error"},oe={class:"number-field"},ne=t("label",{for:"serviceline"},"Service Line:",-1),se={key:0,id:"serviceline-help",class:"p-error"},le={class:"number-field"},ce=t("label",{for:"stob"},"STOB:",-1),de={key:0,id:"stob-help",class:"p-error"},me={class:"number-field"},ue=t("label",{for:"project"},"Project:",-1),ge={key:0,id:"project-help",class:"p-error"},pe=S("Submit"),he=S("Reset");function fe(f,r,y,e,_,U){const V=h("ProgressSpinner"),u=h("PrimeMessage"),g=h("DropDown"),d=h("InputText"),m=h("InputNumber"),b=h("PrimeButton");return a(),o("div",null,[e.loading?(a(),z(V,{key:0})):e.message?(a(),z(u,{key:1,severity:e.messageText.severity,closable:!1},{default:P(()=>[S(D(e.messageText.text),1)]),_:1},8,["severity"])):(a(),o("form",{key:2,onSubmit:r[10]||(r[10]=(...i)=>e.onSubmit&&e.onSubmit(...i)),onReset:r[11]||(r[11]=(...i)=>e.onReset&&e.onReset(...i))},[t("div",N,[G,n(g,{class:s({"p-invalid":e.v$.organization.$error}),id:"organization",modelValue:e.registration.organization,"onUpdate:modelValue":r[0]||(r[0]=i=>e.registration.organization=i),options:e.organizations,optionLabel:"text",optionValue:"value",placeholder:"Select an Organization"},null,8,["class","modelValue","options"]),e.v$.organization.$error?(a(),o("small",E,"Please select your organization.")):l("",!0)]),t("div",O,[L,n(d,{class:s({"p-invalid":e.v$.branch.$error}),id:"branch",type:"branch","aria-describedby":"branch-help",modelValue:e.registration.branch,"onUpdate:modelValue":r[1]||(r[1]=i=>e.registration.branch=i),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.branch.$error?(a(),o("small",A,"Please enter your branch.")):l("",!0)]),t("div",q,[H,n(d,{class:s({"p-invalid":e.v$.primarycontact.$error}),id:"primarycontact",type:"primarycontact","aria-describedby":"primarycontact-help",modelValue:e.registration.primarycontact,"onUpdate:modelValue":r[2]||(r[2]=i=>e.registration.primarycontact=i),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.primarycontact.$error?(a(),o("small",J,"Please enter the name of the Primary Contact for this registration.")):l("",!0)]),t("div",K,[Q,n(d,{class:s({"p-invalid":e.v$.primaryemail.$error}),id:"primaryemail",type:"primaryemail","aria-describedby":"primaryemail-help",modelValue:e.registration.primaryemail,"onUpdate:modelValue":r[3]||(r[3]=i=>e.registration.primaryemail=i),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.primaryemail.$error?(a(),o("small",W,"Email Field is Incorrect.")):l("",!0)]),t("div",X,[Y,n(d,{class:s({"p-invalid":e.v$.financialcontact.$error}),id:"financialcontact",type:"financialcontact","aria-describedby":"financialcontact-help",modelValue:e.registration.financialcontact,"onUpdate:modelValue":r[4]||(r[4]=i=>e.registration.financialcontact=i),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.financialcontact.$error?(a(),o("small",Z,"Please enter the name of the Financial Contact for this registration.")):l("",!0)]),t("div",$,[ee,n(m,{class:s({"p-invalid":e.v$.clientministry.$error}),id:"clientministry",modelValue:e.registration.clientministry,"onUpdate:modelValue":r[5]||(r[5]=i=>e.registration.clientministry=i),min:100,max:999,"aria-placeholder":"3 digit number",placeholder:"3 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.clientministry.$error?(a(),o("small",re,"Please enter the 3-digit client/ministry number.")):l("",!0)]),t("div",ie,[te,n(m,{class:s({"p-invalid":e.v$.respcode.$error}),id:"respcode",modelValue:e.registration.respcode,"onUpdate:modelValue":r[6]||(r[6]=i=>e.registration.respcode=i),min:1e4,max:99999,"aria-placeholder":"5 digit number",placeholder:"5 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.respcode.$error?(a(),o("small",ae,"Please enter the 5-digit RESP Code number.")):l("",!0)]),t("div",oe,[ne,n(m,{class:s({"p-invalid":e.v$.serviceline.$error}),id:"serviceline",modelValue:e.registration.serviceline,"onUpdate:modelValue":r[7]||(r[7]=i=>e.registration.serviceline=i),min:1e4,max:99999,"aria-placeholder":"5 digit number",placeholder:"5 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.serviceline.$error?(a(),o("small",se,"Please enter the 5-digit Service Line number.")):l("",!0)]),t("div",le,[ce,n(m,{class:s({"p-invalid":e.v$.stob.$error}),id:"stob",modelValue:e.registration.stob,"onUpdate:modelValue":r[8]||(r[8]=i=>e.registration.stob=i),min:1e3,max:9999,"aria-placeholder":"4 digit number",placeholder:"4 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.stob.$error?(a(),o("small",de,"Please enter the 4-digit STOB number.")):l("",!0)]),t("div",me,[ue,n(m,{class:s({"p-invalid":e.v$.project.$error}),id:"project",modelValue:e.registration.project,"onUpdate:modelValue":r[9]||(r[9]=i=>e.registration.project=i),min:1e6,max:9999999,"aria-placeholder":"7 digit number",placeholder:"7 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.project.$error?(a(),o("small",ge,"Please enter the 7-digit project number.")):l("",!0)]),n(b,{type:"submit",label:"primary",class:"p-button-raised"},{default:P(()=>[pe]),_:1}),n(b,{type:"reset",label:"danger",class:"p-button-raised p-button-danger"},{default:P(()=>[he]),_:1})],32))])}var _e=w(M,[["render",fe]]);export{_e as I};
