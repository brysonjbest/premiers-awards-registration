import{_ as F,a as U,u as L,r as _,s as T,b as g,o as a,c as o,i as C,w as k,e as I,t as M,k as r,d as n,n as l,l as c,f as N,h as G}from"./index.27555801.js";import{r as d,e as O,n as P,m as S,a as z,b as j,c as D,d as R,u as E}from"./index.esm.b1da9b0d.js";const A={props:{registrationID:String,adminView:Boolean,detailsView:Boolean},setup(p){const i=U(),v=L(),e=_(N.get("organizations")||[]),{registration:y}=T(U()),w={organization:{required:d},branch:{required:d},primarycontact:{required:d},primaryemail:{required:d,email:O},financialcontact:{required:d},clientministry:{required:d,numeric:P,minValueValue:S(100),maxValueValue:z(999)},respcode:{required:d,alphaNum:j,minLengthValue:D(5),maxLengthValue:R(5)},serviceline:{required:d,numeric:P,minValueValue:S(1e4),maxValueValue:z(99999)},stob:{required:d,numeric:P,minValueValue:S(1e3),maxValueValue:z(9999)},project:{required:d,alphaNum:j,minLengthValue:D(7),maxLengthValue:R(7)}},V=E(w,y);let m=_(!1),u=_(!1);const s=_({severity:null,text:""}),h=async function(f){if(f.preventDefault(),!!await this.v$.$validate())try{m.value=!0;const x=v.getUser.username;this.registration.registrar=this.registration.registrar!==null||this.registration.registrar.length!==0?this.registration.registrar:x.username,i.registerFinancialInformation(this.registration).then(B=>{console.log(B),this.$forceUpdate,m.value=!1,u.value=!0,s.value={severity:"success",text:"Registration Updated!"}})}catch(x){m.value=!1,console.warn(x),u.value=!0,s.value={severity:"error",text:"Registration could not be updated."}}finally{setTimeout(()=>u.value=!1,1500),p.registrationID||G.push("/create/registration/")}},b=function(f){f.preventDefault(),this.registration.organization="",this.registration.branch="",this.registration.primarycontact="",this.registration.primaryemail="",this.registration.financialcontact="",this.registration.clientministry=null,this.registration.respcode=null,this.registration.serviceline=null,this.registration.stob=null,this.registration.project=null},t=async function(){const f=v.getUser;return i.$reset,p.registrationID?await i.fillOnlyRegistration(p.registrationID):p.adminView?await i.fillAllRegistrations():await i.fill(f.guid)?i.fill(f.guid):[]};return t(),{loading:m,message:u,messageText:s,registration:y,v$:V,organizations:e,fillList:t,onSubmit:h,onReset:b}}},q={class:"financial-form-selections"},H=r("h3",{class:"form-header"},"Organizational Information",-1),J=r("div",{class:"form-break"},null,-1),K={class:"form-item dropdown"},Q=r("label",{for:"organization"},"Organization:",-1),W={key:0,class:"p-error",id:"organization-help"},X={class:"form-item text-field"},Y=r("label",{for:"branch",id:"branch-help"},"Branch:",-1),Z={key:0,class:"p-error",id:"branch-help"},$=r("div",{class:"form-break"},null,-1),ee=r("h3",{class:"form-header"},"Contact Information",-1),ie=r("div",{class:"form-break"},null,-1),re={class:"form-item text-field"},te=r("label",{for:"primarycontact",id:"primarycontact-help"},"Primary Contact:",-1),ae={key:0,class:"p-error",id:"primarycontact-help"},oe={class:"form-item text-field"},ne=r("label",{for:"primaryemail",id:"primaryemail-help"},"Primary Contact Email:",-1),se={key:0,id:"primaryemail-help",class:"p-error"},le={class:"form-item text-field"},ce=r("label",{for:"financialcontact",id:"financialcontact-help"},"Financial Contact:",-1),de={key:0,class:"p-error",id:"financialcontact-help"},me=r("div",{class:"form-break"},null,-1),ue=r("h3",{class:"form-header"},"Financial Information",-1),fe=r("div",{class:"form-break"},null,-1),ge={class:"form-item number-field"},pe=r("label",{for:"clientministry"},"Client/Ministry Number:",-1),he={key:0,id:"clientministry-help",class:"p-error"},be={class:"form-item number-field"},_e=r("label",{for:"respcode"},"RESP Code:",-1),ve={key:0,id:"respcode-help",class:"p-error"},ye={class:"form-item number-field"},Ve=r("label",{for:"serviceline"},"Service Line:",-1),xe={key:0,id:"serviceline-help",class:"p-error"},ke={class:"form-item number-field"},Pe=r("label",{for:"stob"},"STOB:",-1),Se={key:0,id:"stob-help",class:"p-error"},ze={class:"form-item number-field"},Ie=r("label",{for:"project"},"Project:",-1),we={key:0,id:"project-help",class:"p-error"},Ue={class:"submission-form-buttons"},Ce=I("Submit"),je=I("Reset");function De(p,i,v,e,y,w){const V=g("ProgressSpinner"),m=g("PrimeMessage"),u=g("DropDown"),s=g("InputText"),h=g("InputNumber"),b=g("PrimeButton");return a(),o("div",null,[e.loading?(a(),C(V,{key:0})):e.message?(a(),C(m,{key:1,severity:e.messageText.severity,closable:!1},{default:k(()=>[I(M(e.messageText.text),1)]),_:1},8,["severity"])):(a(),o("form",{key:2,class:"financial-registration-form",onSubmit:i[10]||(i[10]=(...t)=>e.onSubmit&&e.onSubmit(...t)),onReset:i[11]||(i[11]=(...t)=>e.onReset&&e.onReset(...t))},[r("div",q,[H,J,r("div",K,[Q,n(u,{class:l({"p-invalid":e.v$.organization.$error}),id:"organization",modelValue:e.registration.organization,"onUpdate:modelValue":i[0]||(i[0]=t=>e.registration.organization=t),options:e.organizations,optionLabel:"text",optionValue:"value",placeholder:"Select an Organization",title:"organization"},null,8,["class","modelValue","options"]),e.v$.organization.$error?(a(),o("small",W,"Please select your organization.")):c("",!0)]),r("div",X,[Y,n(s,{class:l({"p-invalid":e.v$.branch.$error}),id:"branch",type:"branch","aria-describedby":"branch-help",modelValue:e.registration.branch,"onUpdate:modelValue":i[1]||(i[1]=t=>e.registration.branch=t),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.branch.$error?(a(),o("small",Z,"Please enter your branch.")):c("",!0)]),$,ee,ie,r("div",re,[te,n(s,{class:l({"p-invalid":e.v$.primarycontact.$error}),id:"primarycontact",type:"primarycontact","aria-describedby":"primarycontact-help",modelValue:e.registration.primarycontact,"onUpdate:modelValue":i[2]||(i[2]=t=>e.registration.primarycontact=t),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.primarycontact.$error?(a(),o("small",ae,"Please enter the name of the Primary Contact for this registration.")):c("",!0)]),r("div",oe,[ne,n(s,{class:l({"p-invalid":e.v$.primaryemail.$error}),id:"primaryemail",type:"primaryemail","aria-describedby":"primaryemail-help",modelValue:e.registration.primaryemail,"onUpdate:modelValue":i[3]||(i[3]=t=>e.registration.primaryemail=t),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.primaryemail.$error?(a(),o("small",se,"Email Field is Incorrect.")):c("",!0)]),r("div",le,[ce,n(s,{class:l({"p-invalid":e.v$.financialcontact.$error}),id:"financialcontact",type:"financialcontact","aria-describedby":"financialcontact-help",modelValue:e.registration.financialcontact,"onUpdate:modelValue":i[4]||(i[4]=t=>e.registration.financialcontact=t),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.financialcontact.$error?(a(),o("small",de,"Please enter the name of the Financial Contact for this registration.")):c("",!0)]),me,ue,fe,r("div",ge,[pe,n(h,{class:l({"p-invalid":e.v$.clientministry.$error}),id:"clientministry",modelValue:e.registration.clientministry,"onUpdate:modelValue":i[5]||(i[5]=t=>e.registration.clientministry=t),"aria-placeholder":"3 digit number",placeholder:"3 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.clientministry.$error?(a(),o("small",he,"Please enter the 3-digit client/ministry number.")):c("",!0)]),r("div",be,[_e,n(s,{class:l({"p-invalid":e.v$.respcode.$error}),id:"respcode",modelValue:e.registration.respcode,"onUpdate:modelValue":i[6]||(i[6]=t=>e.registration.respcode=t),modelModifiers:{trim:!0},"aria-placeholder":"5 digit number",placeholder:"5 digit number",useGrouping:!1,"aria-describedby":"respcode-help"},null,8,["class","modelValue"]),e.v$.respcode.$error?(a(),o("small",ve,"Please enter the 5-digit RESP Code number.")):c("",!0)]),r("div",ye,[Ve,n(h,{class:l({"p-invalid":e.v$.serviceline.$error}),id:"serviceline",modelValue:e.registration.serviceline,"onUpdate:modelValue":i[7]||(i[7]=t=>e.registration.serviceline=t),"aria-placeholder":"5 digit number",placeholder:"5 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.serviceline.$error?(a(),o("small",xe,"Please enter the 5-digit Service Line number.")):c("",!0)]),r("div",ke,[Pe,n(h,{class:l({"p-invalid":e.v$.stob.$error}),id:"stob",modelValue:e.registration.stob,"onUpdate:modelValue":i[8]||(i[8]=t=>e.registration.stob=t),"aria-placeholder":"4 digit number",placeholder:"4 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.stob.$error?(a(),o("small",Se,"Please enter the 4-digit STOB number.")):c("",!0)]),r("div",ze,[Ie,n(s,{class:l({"p-invalid":e.v$.project.$error}),id:"project",modelValue:e.registration.project,"onUpdate:modelValue":i[9]||(i[9]=t=>e.registration.project=t),"aria-placeholder":"7 digit number",placeholder:"7 digit number",useGrouping:!1,"aria-describedby":"project-help"},null,8,["class","modelValue"]),e.v$.project.$error?(a(),o("small",we,"Please enter the 7-digit project number.")):c("",!0)])]),r("div",Ue,[n(b,{type:"submit",label:"primary",class:"p-button-raised"},{default:k(()=>[Ce]),_:1}),n(b,{type:"reset",label:"danger",class:"p-button-raised p-button-danger"},{default:k(()=>[je]),_:1})])],32))])}var Le=F(A,[["render",De]]);export{Le as I};
