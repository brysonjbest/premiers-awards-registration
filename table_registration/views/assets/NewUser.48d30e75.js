import{_ as P,u as k,M as x,s as b,r as C,b as m,o as a,c as g,d as t,w as u,j as v,t as V,h as y,k as R,N as M,e as f,C as w,P as B}from"./index.525935a3.js";import{u as S,r as U,e as N}from"./index.esm.ea581107.js";const E={props:{edit:Boolean},setup(){const d=k(),s=x(),{message:n}=b(x()),e=C(!1),{user:r}=b(k()),p={firstname:{required:U},lastname:{required:U},email:{required:U,email:N}},c=S(p,r);return{user:r,message:n,rules:p,v$:c,isRegistered:function(){const l=d.getUser;return this.mode==="register"&&!!l.role},validation:function(){return!!this.user.guid&&!!this.user.username},register:async function(){try{e.value=!0,s.setMessage({text:"Registering user...",type:"info",spinner:!0}),await M.registerUser(r.value),s.setMessage({text:"Successfully registered user!",type:"success"})}catch(l){console.error(l),e.value=!0,s.setMessage({text:"User could not be registered.",type:"error"})}},update:async function(){try{e.value=!0,s.setMessage({text:"Updating user...",type:"info",spinner:!0}),await M.updateUser(r.value.guid,r.value),s.setMessage({text:"Successfully updated user!",type:"success"})}catch(l){console.error(l),e.value=!0,s.setMessage({text:"User could not be updated.",type:"error"})}},activeMessage:e}}},T={key:0},D={key:1},I=f(" You are currently registered as a(n) "),Y=f(". "),j=f("Update"),q=f("Register");function A(d,s,n,e,r,p){const c=m("PrimeMessage"),i=m("InputText"),_=m("PrimeButton"),h=m("PrimeCard");return a(),g("div",null,[t(c,{show:"","v-if":e.user&&e.isRegistered(),variant:"info",closable:!1},{default:u(()=>[e.user.role==="inactive"?(a(),g("p",T," Your registration is currently under review. Please check back regularly for updates. ")):(a(),g("p",D,[I,v("b",null,V(e.user.role),1),Y]))]),_:1},8,["v-if"]),e.activeMessage?(a(),y(c,{key:0,show:"",variant:e.message.type,life:5e3,sticky:!1},{default:u(()=>[v("p",null,V(e.message.text),1)]),_:1},8,["variant"])):R("",!0),t(h,{"v-if":e.user&&(!e.isRegistered()||n.edit)},{content:u(()=>[v("form",null,[t(i,{id:"input-user-register-username",disabled:!0,value:e.user.username},null,8,["value"]),t(i,{id:"input-user-register-firstname",modelValue:e.user.firstname,"onUpdate:modelValue":s[0]||(s[0]=o=>e.user.firstname=o),placeholder:"Enter user's given name"},null,8,["modelValue"]),t(i,{id:"input-user-register-lastname",modelValue:e.user.lastname,"onUpdate:modelValue":s[1]||(s[1]=o=>e.user.lastname=o),placeholder:"Enter user's last name"},null,8,["modelValue"]),t(i,{type:"email",id:"input-user-register-email",modelValue:e.user.email,"onUpdate:modelValue":s[2]||(s[2]=o=>e.user.email=o),placeholder:"Enter user's email"},null,8,["modelValue"]),n.edit?(a(),y(_,{key:0,onClick:e.update,disabled:!e.validation,class:"m-2",type:"button",variant:"info"},{default:u(()=>[j]),_:1},8,["onClick","disabled"])):(a(),y(_,{key:1,onClick:e.register,disabled:!e.validation,class:"m-2",type:"button",variant:"info"},{default:u(()=>[q]),_:1},8,["onClick","disabled"]))])]),_:1},8,["v-if"])])}var H=P(E,[["render",A]]);const G={__name:"NewUser",props:{update:Boolean},setup(d){const n=d.update||!1;return(e,r)=>(a(),g("main",null,[t(B,{title:"User Profile",subtitle:"Update Personal Profile Details"}),t(H,{edit:w(n)},null,8,["edit"])]))}};export{G as default};
