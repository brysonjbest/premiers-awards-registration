import{_ as P,u as x,N as V,s as h,r as R,z as C,b as p,o as r,c as g,i as u,w as d,k as y,t as w,l as U,d as i,T as M,e as f,J as B,P as N}from"./index.bd233f80.js";import{u as S,r as b,e as T}from"./index.esm.55d45502.js";const E={props:{edit:Boolean},setup(){const c=x(),t=V(),{message:a}=h(V()),e=R(!1),{user:s}=h(x()),_={firstname:{required:b},lastname:{required:b},email:{required:b,email:T}},m=S(_,s),n=C(()=>s.value.email&&s.value.firstname&&s.value.lastname);return{user:s,message:a,rules:_,v$:m,isRegistered:function(){return c.getUser.role},validation:n,register:async function(){try{e.value=!0,t.setMessage({text:"Registering user...",type:"info",spinner:!0}),await M.registerUser(s.value).then(()=>{t.setMessage({text:"Successfully registered user!",type:"success"})})}catch(l){console.error(l),e.value=!0,t.setMessage({text:"User could not be registered.",type:"error"})}},update:async function(){try{e.value=!0,t.setMessage({text:"Updating user...",type:"info",spinner:!0}),await M.updateUser(s.value.guid,s.value),t.setMessage({text:"Successfully updated user!",type:"success"})}catch(l){console.error(l),e.value=!0,t.setMessage({text:"User could not be updated.",type:"error"})}},activeMessage:e}}},j={key:0},D={key:1},I=f(" You are currently registered as a(n) "),Y=f(". "),q=f("Update"),z=f("Register");function A(c,t,a,e,s,_){const m=p("PrimeMessage"),n=p("InputText"),v=p("PrimeButton"),k=p("PrimeCard");return r(),g("div",null,[e.isRegistered()?(r(),u(m,{key:0,show:"",variant:"info",closable:!1},{default:d(()=>[e.user.role==="inactive"?(r(),g("p",j," Your registration is currently under review. Please check back regularly for updates. ")):(r(),g("p",D,[I,y("b",null,w(e.user.role),1),Y]))]),_:1})):U("",!0),e.activeMessage?(r(),u(m,{key:1,show:"",variant:e.message.type,life:5e3,sticky:!1},{default:d(()=>[y("p",null,w(e.message.text),1)]),_:1},8,["variant"])):U("",!0),!e.isRegistered()||a.edit?(r(),u(k,{key:2},{content:d(()=>[y("form",null,[i(n,{id:"input-user-register-username",title:"username",disabled:!0,value:e.user.username},null,8,["value"]),i(n,{id:"input-user-register-firstname",title:"first name",modelValue:e.user.firstname,"onUpdate:modelValue":t[0]||(t[0]=o=>e.user.firstname=o),placeholder:"Enter user's given name"},null,8,["modelValue"]),i(n,{id:"input-user-register-lastname",title:"last name",modelValue:e.user.lastname,"onUpdate:modelValue":t[1]||(t[1]=o=>e.user.lastname=o),placeholder:"Enter user's last name"},null,8,["modelValue"]),i(n,{type:"email",title:"email address",id:"input-user-register-email",modelValue:e.user.email,"onUpdate:modelValue":t[2]||(t[2]=o=>e.user.email=o),placeholder:"Enter user's email"},null,8,["modelValue"]),a.edit?(r(),u(v,{key:0,onClick:e.update,disabled:!e.validation,class:"m-2",type:"button",variant:"info"},{default:d(()=>[q]),_:1},8,["onClick","disabled"])):(r(),u(v,{key:1,onClick:e.register,disabled:!e.validation,class:"m-2",type:"button",variant:"info"},{default:d(()=>[z]),_:1},8,["onClick","disabled"]))])]),_:1})):U("",!0)])}var H=P(E,[["render",A],["__file","/Users/brysonbest/projects/premiers-awards-attendance/final/pa-app-dev/table-registration/src/components/UserRegistration.vue"]]);const J={__name:"NewUser",props:{update:Boolean},setup(c){const a=c.update||!1;return(e,s)=>(r(),g("main",null,[i(N,{title:"User Profile",subtitle:"Update Personal Profile Details"}),i(H,{edit:B(a)},null,8,["edit"])]))}};var K=P(J,[["__file","/Users/brysonbest/projects/premiers-awards-attendance/final/pa-app-dev/table-registration/src/views/NewUser.vue"]]);export{K as default};
