import{f as B}from"./settings.services.c80edab4.js";import{r as l,e as F,n as k,m as P,a as S,b as U,c as C,d as j,u as L}from"./index.esm.5bfeacfb.js";import{_ as T,a as D,u as M,r as _,s as N,b as g,o as a,c as o,i as R,w as z,e as I,t as G,k as r,d as n,n as c,l as d,h as O}from"./index.a419a013.js";const E={props:{registrationID:String,adminView:Boolean,detailsView:Boolean},setup(p){const i=D(),v=M(),e=_(B.get("organizations")||[]),{registration:y}=N(D()),w={organization:{required:l},branch:{required:l},primarycontact:{required:l},primaryemail:{required:l,email:F},financialcontact:{required:l},clientministry:{required:l,numeric:k,minValueValue:P(100),maxValueValue:S(999)},respcode:{required:l,alphaNum:U,minLengthValue:C(5),maxLengthValue:j(5)},serviceline:{required:l,numeric:k,minValueValue:P(1e4),maxValueValue:S(99999)},stob:{required:l,numeric:k,minValueValue:P(1e3),maxValueValue:S(9999)},project:{required:l,alphaNum:U,minLengthValue:C(7),maxLengthValue:j(7)}},V=L(w,y);let m=_(!1),u=_(!1);const s=_({severity:null,text:""}),h=async function(f){if(f.preventDefault(),!!await this.v$.$validate())try{m.value=!0;const x=v.getUser.username;this.registration.registrar=this.registration.registrar!==null||this.registration.registrar.length!==0?this.registration.registrar:x.username,i.registerFinancialInformation(this.registration).then(()=>{this.$forceUpdate,m.value=!1,u.value=!0,s.value={severity:"success",text:"Registration Updated!"}})}catch(x){m.value=!1,console.warn(x),u.value=!0,s.value={severity:"error",text:"Registration could not be updated."}}finally{setTimeout(()=>u.value=!1,1500),p.registrationID||O.push("/create/registration/")}},b=function(f){f.preventDefault(),this.registration.organization="",this.registration.branch="",this.registration.primarycontact="",this.registration.primaryemail="",this.registration.financialcontact="",this.registration.clientministry=null,this.registration.respcode=null,this.registration.serviceline=null,this.registration.stob=null,this.registration.project=null},t=async function(){const f=v.getUser;return i.$reset,p.registrationID?await i.fillOnlyRegistration(p.registrationID):p.adminView?await i.fillAllRegistrations():await i.fill(f.guid)?i.fill(f.guid):[]};return t(),{loading:m,message:u,messageText:s,registration:y,v$:V,organizations:e,fillList:t,onSubmit:h,onReset:b}}},A={class:"financial-form-selections"},q=r("h3",{class:"form-header"},"Organizational Information",-1),H=r("div",{class:"form-break"},null,-1),J={class:"form-item dropdown"},K=r("label",{for:"organization"},"Organization:",-1),Q={key:0,class:"p-error",id:"organization-help"},W={class:"form-item text-field"},X=r("label",{for:"branch",id:"branch-help"},"Branch:",-1),Y={key:0,class:"p-error",id:"branch-help"},Z=r("div",{class:"form-break"},null,-1),$=r("h3",{class:"form-header"},"Contact Information",-1),ee=r("div",{class:"form-break"},null,-1),ie={class:"form-item text-field"},re=r("label",{for:"primarycontact",id:"primarycontact-help"},"Primary Contact:",-1),te={key:0,class:"p-error",id:"primarycontact-help"},ae={class:"form-item text-field"},oe=r("label",{for:"primaryemail",id:"primaryemail-help"},"Primary Contact Email:",-1),ne={key:0,id:"primaryemail-help",class:"p-error"},se={class:"form-item text-field"},le=r("label",{for:"financialcontact",id:"financialcontact-help"},"Financial Contact:",-1),ce={key:0,class:"p-error",id:"financialcontact-help"},de=r("div",{class:"form-break"},null,-1),me=r("h3",{class:"form-header"},"Financial Information",-1),ue=r("div",{class:"form-break"},null,-1),fe={class:"form-item number-field"},ge=r("label",{for:"clientministry"},"Client/Ministry Number:",-1),pe={key:0,id:"clientministry-help",class:"p-error"},he={class:"form-item number-field"},be=r("label",{for:"respcode"},"RESP Code:",-1),_e={key:0,id:"respcode-help",class:"p-error"},ve={class:"form-item number-field"},ye=r("label",{for:"serviceline"},"Service Line:",-1),Ve={key:0,id:"serviceline-help",class:"p-error"},xe={class:"form-item number-field"},ke=r("label",{for:"stob"},"STOB:",-1),Pe={key:0,id:"stob-help",class:"p-error"},Se={class:"form-item number-field"},ze=r("label",{for:"project"},"Project:",-1),Ie={key:0,id:"project-help",class:"p-error"},we={class:"submission-form-buttons"},Ue=I("Submit"),Ce=I("Reset");function je(p,i,v,e,y,w){const V=g("ProgressSpinner"),m=g("PrimeMessage"),u=g("DropDown"),s=g("InputText"),h=g("InputNumber"),b=g("PrimeButton");return a(),o("div",null,[e.loading?(a(),R(V,{key:0})):e.message?(a(),R(m,{key:1,severity:e.messageText.severity,closable:!1},{default:z(()=>[I(G(e.messageText.text),1)]),_:1},8,["severity"])):(a(),o("form",{key:2,class:"financial-registration-form",onSubmit:i[10]||(i[10]=(...t)=>e.onSubmit&&e.onSubmit(...t)),onReset:i[11]||(i[11]=(...t)=>e.onReset&&e.onReset(...t))},[r("div",A,[q,H,r("div",J,[K,n(u,{class:c({"p-invalid":e.v$.organization.$error}),id:"organization",modelValue:e.registration.organization,"onUpdate:modelValue":i[0]||(i[0]=t=>e.registration.organization=t),options:e.organizations,optionLabel:"text",optionValue:"value",placeholder:"Select an Organization",title:"organization"},null,8,["class","modelValue","options"]),e.v$.organization.$error?(a(),o("small",Q,"Please select your organization.")):d("",!0)]),r("div",W,[X,n(s,{class:c({"p-invalid":e.v$.branch.$error}),id:"branch",type:"branch","aria-describedby":"branch-help",modelValue:e.registration.branch,"onUpdate:modelValue":i[1]||(i[1]=t=>e.registration.branch=t),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.branch.$error?(a(),o("small",Y,"Please enter your branch.")):d("",!0)]),Z,$,ee,r("div",ie,[re,n(s,{class:c({"p-invalid":e.v$.primarycontact.$error}),id:"primarycontact",type:"primarycontact","aria-describedby":"primarycontact-help",modelValue:e.registration.primarycontact,"onUpdate:modelValue":i[2]||(i[2]=t=>e.registration.primarycontact=t),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.primarycontact.$error?(a(),o("small",te,"Please enter the name of the Primary Contact for this registration.")):d("",!0)]),r("div",ae,[oe,n(s,{class:c({"p-invalid":e.v$.primaryemail.$error}),id:"primaryemail",type:"primaryemail","aria-describedby":"primaryemail-help",modelValue:e.registration.primaryemail,"onUpdate:modelValue":i[3]||(i[3]=t=>e.registration.primaryemail=t),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.primaryemail.$error?(a(),o("small",ne,"Email Field is Incorrect.")):d("",!0)]),r("div",se,[le,n(s,{class:c({"p-invalid":e.v$.financialcontact.$error}),id:"financialcontact",type:"financialcontact","aria-describedby":"financialcontact-help",modelValue:e.registration.financialcontact,"onUpdate:modelValue":i[4]||(i[4]=t=>e.registration.financialcontact=t),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),e.v$.financialcontact.$error?(a(),o("small",ce,"Please enter the name of the Financial Contact for this registration.")):d("",!0)]),de,me,ue,r("div",fe,[ge,n(h,{class:c({"p-invalid":e.v$.clientministry.$error}),id:"clientministry",modelValue:e.registration.clientministry,"onUpdate:modelValue":i[5]||(i[5]=t=>e.registration.clientministry=t),"aria-placeholder":"3 digit number",placeholder:"3 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.clientministry.$error?(a(),o("small",pe,"Please enter the 3-digit client/ministry number.")):d("",!0)]),r("div",he,[be,n(s,{class:c({"p-invalid":e.v$.respcode.$error}),id:"respcode",modelValue:e.registration.respcode,"onUpdate:modelValue":i[6]||(i[6]=t=>e.registration.respcode=t),modelModifiers:{trim:!0},"aria-placeholder":"5 digit number",placeholder:"5 digit number",useGrouping:!1,"aria-describedby":"respcode-help"},null,8,["class","modelValue"]),e.v$.respcode.$error?(a(),o("small",_e,"Please enter the 5-digit RESP Code number.")):d("",!0)]),r("div",ve,[ye,n(h,{class:c({"p-invalid":e.v$.serviceline.$error}),id:"serviceline",modelValue:e.registration.serviceline,"onUpdate:modelValue":i[7]||(i[7]=t=>e.registration.serviceline=t),"aria-placeholder":"5 digit number",placeholder:"5 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.serviceline.$error?(a(),o("small",Ve,"Please enter the 5-digit Service Line number.")):d("",!0)]),r("div",xe,[ke,n(h,{class:c({"p-invalid":e.v$.stob.$error}),id:"stob",modelValue:e.registration.stob,"onUpdate:modelValue":i[8]||(i[8]=t=>e.registration.stob=t),"aria-placeholder":"4 digit number",placeholder:"4 digit number",useGrouping:!1},null,8,["class","modelValue"]),e.v$.stob.$error?(a(),o("small",Pe,"Please enter the 4-digit STOB number.")):d("",!0)]),r("div",Se,[ze,n(s,{class:c({"p-invalid":e.v$.project.$error}),id:"project",modelValue:e.registration.project,"onUpdate:modelValue":i[9]||(i[9]=t=>e.registration.project=t),"aria-placeholder":"7 digit number",placeholder:"7 digit number",useGrouping:!1,"aria-describedby":"project-help"},null,8,["class","modelValue"]),e.v$.project.$error?(a(),o("small",Ie,"Please enter the 7-digit project number.")):d("",!0)])]),r("div",we,[n(b,{type:"submit",label:"primary",class:"p-button-raised"},{default:z(()=>[Ue]),_:1}),n(b,{type:"reset",label:"danger",class:"p-button-raised p-button-danger"},{default:z(()=>[Ce]),_:1})])],32))])}var Le=T(E,[["render",je]]);export{Le as I};
